<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" routerLink="/home">LoanHub</a>
    <div class="navbar-collapse collapse justify-content-end">
      <div class="navbar-text me-3">
        <i class="fas fa-user"></i> 
        Welcome, {{ userName }}!
      </div>
      <button class="btn btn-outline-light" (click)="logout()">Logout</button>
    </div>
  </div>
</nav>

<div>
  <form (ngSubmit)="onSubmit()" #analyticsForm="ngForm">
    <h2>Analytics</h2>

    <label for="applicationsCount">Applications Count:</label>
    <input 
      type="number" 
      id="applicationsCount" 
      [(ngModel)]="adminAnalytics.applicationsCount" 
      name="applicationsCount" 
      placeholder="Enter total applications count"
      [required]="true"
      [min]="0"
      #applicationsCount="ngModel"
    />
    <div *ngIf="applicationsCount.touched" class="error-message">
      <ng-container *ngIf="applicationsCount.errors?.['required']">Applications count is required.</ng-container>
      <ng-container *ngIf="applicationsCount.errors?.['min']">Applications count cannot be negative.</ng-container>
    </div>

    <label for="approvedLoansCount">Approved Loans Count:</label>
    <input 
      type="number" 
      id="approvedLoansCount" 
      [(ngModel)]="adminAnalytics.approvedLoansCount" 
      name="approvedLoansCount" 
      placeholder="Enter approved loans count"
      [required]="true"
      [min]="0"
      #approvedLoansCount="ngModel"
    />
    <div *ngIf="approvedLoansCount.touched" class="error-message">
      <ng-container *ngIf="approvedLoansCount.errors?.['required']">Approved loans count is required.</ng-container>
      <ng-container *ngIf="approvedLoansCount.errors?.['min']">Approved loans count cannot be negative.</ng-container>
    </div>

    <label for="rejectedLoansCount">Rejected Loans Count:</label>
    <input 
      type="number" 
      id="rejectedLoansCount" 
      [(ngModel)]="adminAnalytics.rejectedLoansCount" 
      name="rejectedLoansCount" 
      placeholder="Enter rejected loans count"
      [required]="true"
      [min]="0"
      #rejectedLoansCount="ngModel"
    />
    <div *ngIf="rejectedLoansCount.touched" class="error-message">
      <ng-container *ngIf="rejectedLoansCount.errors?.['required']">Rejected loans count is required.</ng-container>
      <ng-container *ngIf="rejectedLoansCount.errors?.['min']">Rejected loans count cannot be negative.</ng-container>
    </div>

    <label for="totalLoanAmount">Total Loan Amount:</label>
    <input 
      type="number" 
      id="totalLoanAmount" 
      [(ngModel)]="adminAnalytics.totalLoanAmount" 
      name="totalLoanAmount" 
      placeholder="Enter total loan amount"
      [required]="true"
      [min]="0"
      #totalLoanAmount="ngModel"
    />
    <div *ngIf="totalLoanAmount.touched" class="error-message">
      <ng-container *ngIf="totalLoanAmount.errors?.['required']">Total loan amount is required.</ng-container>
      <ng-container *ngIf="totalLoanAmount.errors?.['min']">Total loan amount cannot be negative.</ng-container>
    </div>

    <label for="totalRepaymentCollected">Total Repayment Collected:</label>
    <input 
      type="number" 
      id="totalRepaymentCollected" 
      [(ngModel)]="adminAnalytics.totalRepaymentCollected" 
      name="totalRepaymentCollected" 
      placeholder="Enter total repayment collected"
      [required]="true"
      [min]="0"
      #totalRepaymentCollected="ngModel"
    />
    <div *ngIf="totalRepaymentCollected.touched" class="error-message">
      <ng-container *ngIf="totalRepaymentCollected.errors?.['required']">Total repayment collected is required.</ng-container>
      <ng-container *ngIf="totalRepaymentCollected.errors?.['min']">Total repayment collected cannot be negative.</ng-container>
    </div>

    <label for="loanSchemeId">Loan Scheme ID:</label>
    <input 
      type="number" 
      id="loanSchemeId" 
      [(ngModel)]="adminAnalytics.loanSchemeId" 
      name="loanSchemeId" 
      placeholder="Enter loan scheme ID"
      [required]="true"
      [min]="1"
      #loanSchemeId="ngModel"
    />
    <div *ngIf="loanSchemeId.touched" class="error-message">
      <ng-container *ngIf="loanSchemeId.errors?.['required']">Loan scheme ID is required.</ng-container>
      <ng-container *ngIf="loanSchemeId.errors?.['min']">Loan scheme ID must be a positive number.</ng-container>
    </div>

    <button type="submit" [disabled]="analyticsForm.invalid">Submit</button>
  </form>

  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

  <div class="text-center mt-4">
    <button 
        routerLink="/loan-officer" 
        class="btn btn-secondary" 
        style="background-color: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
        Back to Dashboard
    </button>
  </div>
</div>
