  
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand"  routerLink="/home">LoanHub</a>
    <div class="navbar-collapse collapse justify-content-end">
      <div class="navbar-text me-3">
        Welcome, {{ userName }}!
      </div>
      <button class="btn btn-outline-light" (click)="logout()">Logout</button>
    </div>
  </div>
</nav>

  <div class="container">
    <h3>Loan Repayment Details</h3>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Sr.no</th>
          <th>Total Loan Amount</th>
          <th>EMI Amount</th>
          <th>Principal Amount</th>
          <th>Interest Amount</th>
          <th>Principal Paid</th>
          <th>Due Date</th>
          <th>No. of Installments</th>
          <th>Last Paid</th>
          <th>Is NPA</th>
          <th>Payment Status</th>
          <th>Loan Application ID</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let loan of loanRepayment; let i=index">
          <td>{{i+1}}</td>
          <td>{{ loan.totalLoanAmount }}</td>
          <td>{{ loan.emiAmount | number: '1.2-2' }}</td>
          <td>{{ loan.principalAmount }}</td>
          <td>{{ loan.interestAmount }}</td>
          <td>{{ loan.principalPaid }}</td>
          <td>{{ loan.dueDate | date: 'short' }}</td>
          <td>{{ loan.noOfInstallments }}</td>
          <td>{{ loan.lastPaid | date: 'short' }}</td>
          <td>{{ loan.isNPA ? 'Yes' : 'No' }}</td>
          <td>{{ loan.paymentStatus }}</td>
          <td>{{ loan.loanApplicationId }}</td>
        </tr>
      </tbody>
    </table>


    <div class="loan-application">
      <div> <h3>Pay Here</h3></div>
     
      <button type="button" class="fancy-button" *ngFor="let value of loanRepayment" (click)="showLoanRepaymentForm(value.emiAmount )">
        EMI Payment
      </button>
      <button type="button" class="fancy-button" (click)="showLoanRepaymentForm1()">
        Variable Payment
      </button>
    </div>
    
    <div *ngIf="showForm" class="loan-application">
      <h3>Loan Repayment Form</h3>
      <form [formGroup]="loanRepaymentForm" (ngSubmit)="postLoanRepayment()">
        <div class="mb-3">
          <label for="paymentAmount" class="form-label">Payment Amount</label>
          <input type="number" id="paymentAmount" formControlName="PaymentAmount" class="form-control" required />
        </div>
        <div id="paypal-button-container" class="mt-3"></div>
     
        <div *ngIf="transactionInProgress" class="alert alert-info mt-3">
          Transaction in progress. Please do not refresh the page.
        </div>
    
        <button type="button" class="btn btn-danger" (click)="removeForm()">Remove</button>
    
    <!--      
        <button type="submit" class="btn btn-primary">Submit</button> -->
      </form>
    </div>

  
    <h3>Repayment History</h3>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Sr.No</th>
          <th>Amount Paid</th>
          <th>Payment Date</th>
        
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let repayment of loanRepayment[0]?.repaymentHistory;let i=index">
          <td>{{ i+1}}</td>
          <td>{{ repayment.amountPaid }}</td>
          <td>{{ repayment.paymentDate | date: 'short' }}</td>
        
        </tr>
      </tbody>
    </table>

    <div class="text-center mt-4">
      <button 
          routerLink="/dashboard" 
          class="btn btn-secondary" 
          style="background-color: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
          Back to Dashboard
      </button>
  </div>
  </div>
 
  

  























